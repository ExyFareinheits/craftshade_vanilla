# üé≠ Discord Roles Integration - –ì–æ—Ç–æ–≤–æ!

## ‚úÖ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

### 1. **Discord OAuth –∑ —Ä–æ–ª—è–º–∏**
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Discord
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–æ–ª–µ–π –∑ Discord —Å–µ—Ä–≤–µ—Ä–∞
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ localStorage (—Ç–∏–º—á–∞—Å–æ–≤–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)

### 2. **–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–æ–ª–µ–π –Ω–∞ ProfilePage**
- –ö—Ä–∞—Å–∏–≤—ñ –±–µ–π–¥–∂—ñ –∑ –∫–æ–ª—å–æ—Ä–∞–º–∏ —Ä–æ–ª–µ–π
- Hover –µ—Ñ–µ–∫—Ç–∏
- –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –ø–æ–∑–∏—Ü—ñ—î—é (–Ω–∞–π–≤–∏—â—ñ —Ä–æ–ª—ñ –∑–≤–µ—Ä—Ö—É)
- –ê–Ω—ñ–º–∞—Ü—ñ—ó –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ

### 3. **–û–Ω–æ–≤–ª–µ–Ω–∏–π UI**
- –ü—Ä–∏–±—Ä–∞–Ω–æ —Å–µ–∫—Ü—ñ—é Minecraft –ø—Ä–∏–≤'—è–∑–∫–∏
- –î–æ–¥–∞–Ω–æ —Å–µ–∫—Ü—ñ—é "–¢–≤–æ—ó —Ä–æ–ª—ñ –Ω–∞ Discord —Å–µ—Ä–≤–µ—Ä—ñ"
- –ï–º–æ–¥–∑—ñ —Ç–∞ —ñ–∫–æ–Ω–∫–∏
- Responsive –¥–∏–∑–∞–π–Ω

---

## üé® –Ø–∫ –≤–∏–≥–ª—è–¥–∞—î:

```
üë§ –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚îú‚îÄ‚îÄ üñºÔ∏è –ê–≤–∞—Ç–∞—Ä–∫–∞ Discord
‚îú‚îÄ‚îÄ üëë –¢–≤–æ—ó —Ä–æ–ª—ñ –Ω–∞ Discord —Å–µ—Ä–≤–µ—Ä—ñ
‚îÇ   ‚îú‚îÄ‚îÄ üî¥ Admin (—á–µ—Ä–≤–æ–Ω–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ üîµ Moderator (—Å–∏–Ω—ñ–π)
‚îÇ   ‚îú‚îÄ‚îÄ üü¢ Verified (–∑–µ–ª–µ–Ω–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ ‚ö™ Member (—Å—ñ—Ä–∏–π)
‚îî‚îÄ‚îÄ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–æ–∫–∏ –ø–æ—Ä–æ–∂–Ω—è)
```

---

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

### Environment Variables (.env):
```env
VITE_DISCORD_CLIENT_ID=1418288543637311609
DISCORD_CLIENT_SECRET=qZ-i_u5asK8G90lRNrdYelxzWwqdsbEO
VITE_DISCORD_GUILD_ID=1293607830584451104
VITE_APP_URL=http://localhost:5173
VITE_REDIRECT_URI=http://localhost:5173/auth/callback
```

### Discord Application Scopes:
- ‚úÖ `identify` - –±–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- ‚úÖ `email` - email –∞–¥—Ä–µ—Å–∞
- ‚úÖ `guilds` - —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä—ñ–≤
- ‚úÖ `guilds.members.read` - —Ä–æ–ª—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö

### Discord Redirect URLs:
- ‚úÖ `http://localhost:5173/auth/callback` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)
- ‚ö†Ô∏è –î–æ–¥–∞–π `https://—Ç–≤—ñ–π-–¥–æ–º–µ–Ω.vercel.app/auth/callback` –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º

---

## üöÄ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è:
```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üí –ö–Ω–æ–ø–∫–∞ "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord" ‚Üí
Discord OAuth ‚Üí Callback Page ‚Üí
–û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ ‚Üí –ó–∞–ø–∏—Ç –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚Üí
–ó–∞–ø–∏—Ç —Ä–æ–ª–µ–π –∑ Guild ‚Üí –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ localStorage ‚Üí
–†–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ Profile Page
```

### 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–æ–ª–µ–π:
```typescript
// 1. –û—Ç—Ä–∏–º—É—î–º–æ member data
GET https://discord.com/api/users/@me/guilds/{guildId}/member
// –ü–æ–≤–µ—Ä—Ç–∞—î: { roles: ["roleId1", "roleId2", ...] }

// 2. –û—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ guild
GET https://discord.com/api/guilds/{guildId}
// –ü–æ–≤–µ—Ä—Ç–∞—î: { roles: [{ id, name, color, position }, ...] }

// 3. –§—ñ–ª—å—Ç—Ä—É—î–º–æ —ñ —Å–æ—Ä—Ç—É—î–º–æ
userRoles = guildRoles
  .filter(role => memberRoles.includes(role.id))
  .sort((a, b) => b.position - a.position)
```

### 3. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è:
```tsx
{user.roles.map((role) => (
  <div 
    className="role-badge"
    style={{
      backgroundColor: `#${role.color.toString(16)}`,
      borderColor: `#${role.color.toString(16)}`
    }}
  >
    {role.name}
  </div>
))}
```

---

## üéØ –©–æ –¥–∞–ª—ñ:

### –§–∞–∑–∞ 1: –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è UI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–æ–¥–∞—Ç–∏ —ñ–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–æ–ª–µ–π
- [ ] Hover –∑ –æ–ø–∏—Å–æ–º —Ä–æ–ª—ñ
- [ ] –ê–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏ —Ä–æ–ª–µ–π
- [ ] –§—ñ–ª—å—Ç—Ä —Ä–æ–ª–µ–π (–ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤–∞–∂–ª–∏–≤—ñ)

### –§–∞–∑–∞ 2: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É)
- [ ] Supabase –∞–±–æ PostgreSQL
- [ ] –¢–∞–±–ª–∏—Ü—è `users` –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª–µ–π –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –≤—Ö–æ–¥—ñ
- [ ] –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–æ–ª–µ–π (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–∞–∑ –Ω–∞ –≥–æ–¥–∏–Ω—É)

### –§–∞–∑–∞ 3: –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- [ ] –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω–∏ —Ä–æ–ª–µ–π
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Minecraft (—á–µ—Ä–µ–∑ DiscordSRV)
- [ ] –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å—É online/offline

---

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏:
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è localStorage
- ‚ö†Ô∏è Client Secret –≤ –∫–æ–¥—ñ (–Ω–µ –±–µ–∑–ø–µ—á–Ω–æ!)
- ‚úÖ –ü—Ä–∞—Ü—é—î –±–µ–∑ backend

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É (Vercel):
- ‚úÖ API endpoints –≤ –ø–∞–ø—Ü—ñ `/api/auth/`
- ‚úÖ Client Secret –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (–±–µ–∑–ø–µ—á–Ω–æ)
- ‚úÖ JWT —Ç–æ–∫–µ–Ω–∏ –≤ httpOnly cookies
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

**–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º –Ω–∞ Vercel:**
1. –î–æ–¥–∞–π Redirect URL –≤ Discord Application
2. –ù–∞–ª–∞—à—Ç—É–π Environment Variables –Ω–∞ Vercel
3. –í–∏–¥–∞–ª–∏ Client Secret –∑ `CallbackPage.tsx`
4. API endpoints –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—Ä–∞—Ü—é—é—Ç—å

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1. **–õ–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   npm run dev
   # –í—ñ–¥–∫—Ä–∏–π http://localhost:5173
   ```

2. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è —á–µ—Ä–µ–∑ Discord**
   - –ù–∞—Ç–∏—Å–Ω–∏ "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord"
   - –î–æ–∑–≤–æ–ª—å –¥–æ—Å—Ç—É–ø –¥–æ —Ä–æ–ª–µ–π
   - –ü–æ–≤–µ—Ä–Ω–µ—à—Å—è –Ω–∞ /profile

3. **–ü–µ—Ä–µ–≤—ñ—Ä —Ä–æ–ª—ñ**
   - –ú–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏ –≤—Å—ñ —Å–≤–æ—ó —Ä–æ–ª—ñ –∑ Discord —Å–µ—Ä–≤–µ—Ä–∞
   - –í–æ–Ω–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ –∑–∞ –ø–æ–∑–∏—Ü—ñ—î—é
   - –ö–æ–ª—ñ—Ä –∫–æ–∂–Ω–æ—ó —Ä–æ–ª—ñ –º–∞—î —Å–ø—ñ–≤–ø–∞–¥–∞—Ç–∏ –∑ Discord

4. **–¢–µ—Å—Ç—É–π Logout**
   - –ù–∞—Ç–∏—Å–Ω–∏ "–í–∏–π—Ç–∏" –≤ ProfileDropdown
   - –ú–∞—î –æ—á–∏—Å—Ç–∏—Ç–∏ localStorage
   - –†–µ–¥—ñ—Ä–µ–∫—Ç–Ω—É—Ç–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É

---

## üêõ Troubleshooting:

### –†–æ–ª—ñ –Ω–µ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è:
1. –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —î –Ω–∞ Discord —Å–µ—Ä–≤–µ—Ä—ñ
2. –ü–µ—Ä–µ–≤—ñ—Ä Guild ID –≤ .env —Ñ–∞–π–ª—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä scope `guilds.members.read` –≤ OAuth URL
4. –ü–æ–¥–∏–≤–∏—Å—å console –≤ DevTools (F12)

### –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:
1. –ü–µ—Ä–µ–≤—ñ—Ä Redirect URL –≤ Discord Application
2. –ü–µ—Ä–µ–≤—ñ—Ä Client ID —Ç–∞ Secret
3. –û—á–∏—Å—Ç–∏ localStorage —Ç–∞ cookies
4. –°–ø—Ä–æ–±—É–π –≤ —Ä–µ–∂–∏–º—ñ —ñ–Ω–∫–æ–≥–Ω—ñ—Ç–æ

### –ö–æ–ª—ñ—Ä —Ä–æ–ª—ñ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è:
- –î–µ—è–∫—ñ —Ä–æ–ª—ñ –º–∞—é—Ç—å `color: 0` (–±–µ–∑ –∫–æ–ª—å–æ—Ä—É)
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è fallback –∫–æ–ª—ñ—Ä (—Å–∏–Ω—ñ–π)

---

## üìù –§–∞–π–ª–∏ —â–æ –±—É–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ:

```
src/
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx           # –î–æ–¥–∞–Ω–æ DiscordRole interface
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ CallbackPage/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CallbackPage.tsx      # –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–æ–ª–µ–π –∑ Discord API
‚îÇ   ‚îî‚îÄ‚îÄ ProfilePage/
‚îÇ       ‚îú‚îÄ‚îÄ ProfilePage.tsx       # –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–æ–ª–µ–π –∑–∞–º—ñ—Å—Ç—å Minecraft
‚îÇ       ‚îî‚îÄ‚îÄ ProfilePage.scss      # –°—Ç–∏–ª—ñ –¥–ª—è role-badge
‚îú‚îÄ‚îÄ vite-env.d.ts                 # –î–æ–¥–∞–Ω–æ VITE_DISCORD_GUILD_ID
‚îî‚îÄ‚îÄ .env                          # –î–æ–¥–∞–Ω–æ Guild ID

api/auth/
‚îî‚îÄ‚îÄ (–±–µ–∑ –∑–º—ñ–Ω, –ø—Ä–∞—Ü—é—î –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É)
```

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ **–ü—Ä–∞—Ü—é—é—á–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ Discord**
‚úÖ **–ö—Ä–∞—Å–∏–≤–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–æ–ª–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**
‚úÖ **–ì–æ—Ç–æ–≤–æ –¥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
‚ö†Ô∏è **–ü–æ—Ç—Ä—ñ–±–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É**

---

**–ü–∏—Ç–∞–Ω–Ω—è? –ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö –∞–±–æ –¥–µ–ø–ª–æ—î–º –Ω–∞ Vercel?** üöÄ
