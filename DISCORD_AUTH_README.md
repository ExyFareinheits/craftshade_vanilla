# üéÆ Discord OAuth –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è - –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

## ‚úÖ –©–æ –≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ:

1. ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞–∫–µ—Ç–∏
2. ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ API endpoints –¥–ª—è Discord OAuth
3. ‚úÖ –î–æ–¥–∞–Ω–æ AuthContext –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
4. ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ LoginButton —ñ ProfileDropdown
5. ‚úÖ –î–æ–¥–∞–Ω–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–æ—Ñ—ñ–ª—é –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø—Ä–∏–≤'—è–∑–∫–∏ Minecraft
6. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é –≤ Header

## üîß –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ:

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Discord Application (–í–ê–ñ–õ–ò–í–û!)

–ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://discord.com/developers/applications/1418288543637311609/oauth2/general

–î–æ–¥–∞–π Redirect URLs:
- ‚úÖ `http://localhost:5173/auth/callback` (–≤–∂–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏)
- ‚ö†Ô∏è `https://—Ç–≤—ñ–π-–¥–æ–º–µ–Ω.vercel.app/auth/callback` (–¥–æ–¥–∞–π –∫–æ–ª–∏ –∑–∞–¥–µ–ø–ª–æ—ó—à)

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ environment variables –Ω–∞ Vercel

–ö–æ–ª–∏ –±—É–¥–µ—à –¥–µ–ø–ª–æ—ó—Ç–∏ –Ω–∞ Vercel, –¥–æ–¥–∞–π —Ç–∞–∫—ñ –∑–º—ñ–Ω–Ω—ñ:

```
VITE_DISCORD_CLIENT_ID=1418288543637311609
DISCORD_CLIENT_SECRET=qZ-i_u5asK8G90lRNrdYelxzWwqdsbEO
JWT_SECRET=—Ç–≤—ñ–π-–≤–∏–ø–∞–¥–∫–æ–≤–∏–π-—Å–µ–∫—Ä–µ—Ç–Ω–∏–π-–∫–ª—é—á
VITE_APP_URL=https://—Ç–≤—ñ–π-–¥–æ–º–µ–Ω.vercel.app
VITE_REDIRECT_URI=https://—Ç–≤—ñ–π-–¥–æ–º–µ–Ω.vercel.app/auth/callback
```

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û:** –ó–≥–µ–Ω–µ—Ä—É–π –Ω–æ–≤–∏–π JWT_SECRET –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É!
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∏–≤'—è–∑–æ–∫ Minecraft)

–ó–∞—Ä–∞–∑ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ë–ï–ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (—Ç—ñ–ª—å–∫–∏ –≤ JWT –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è Discord —ñ–Ω—Ñ–æ).

**–î–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –ë–î:**

#### –í–∞—Ä—ñ–∞–Ω—Ç A: Supabase (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)
1. –°—Ç–≤–æ—Ä–∏ –∞–∫–∞—É–Ω—Ç –Ω–∞ https://supabase.com
2. –°—Ç–≤–æ—Ä–∏ –ø—Ä–æ–µ–∫—Ç
3. –°—Ç–≤–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü—é `users`:
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  discord_id VARCHAR(255) UNIQUE NOT NULL,
  username VARCHAR(255) NOT NULL,
  avatar VARCHAR(255),
  email VARCHAR(255),
  minecraft_nickname VARCHAR(16),
  minecraft_uuid VARCHAR(36),
  link_code VARCHAR(10),
  link_expires_at TIMESTAMP,
  is_linked BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

4. –î–æ–¥–∞–π Supabase credentials –≤ .env:
```
SUPABASE_URL=—Ç–≤—ñ–π-supabase-url
SUPABASE_KEY=—Ç–≤—ñ–π-supabase-key
```

5. –í—Å—Ç–∞–Ω–æ–≤–∏ Supabase –∫–ª—ñ—î–Ω—Ç:
```bash
npm install @supabase/supabase-js
```

#### –í–∞—Ä—ñ–∞–Ω—Ç B: MongoDB Atlas
```bash
npm install mongodb
```

### 4. –î–æ–¥–∞—Ç–∏ endpoints –¥–ª—è –ø—Ä–∏–≤'—è–∑–∫–∏ Minecraft

–ü–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏:
- `POST /api/minecraft/generate-code` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–¥—É –¥–ª—è –ø—Ä–∏–≤'—è–∑–∫–∏
- `POST /api/minecraft/verify` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É (–≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∑ Minecraft –ø–ª–∞–≥—ñ–Ω–∞)
- `GET /api/minecraft/stats` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥—Ä–∞–≤—Ü—è

### 5. –°—Ç–≤–æ—Ä–∏—Ç–∏ Minecraft –ø–ª–∞–≥—ñ–Ω (Paper/Spigot)

```java
// –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–∏–≤'—è–∑–∫–∏
/link <CODE>

// –Ø–∫—ñ –¥–∞–Ω—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –Ω–∞ API:
- UUID –≥—Ä–∞–≤—Ü—è
- –ù—ñ–∫–Ω–µ–π–º
- –ö–æ–¥ –ø—Ä–∏–≤'—è–∑–∫–∏
```

## üéØ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑:

1. **–õ–æ–∫–∞–ª—å–Ω–æ (http://localhost:5173)**:
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord" –≤ Header
   - ‚úÖ –†–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ Discord OAuth
   - ‚úÖ –ü—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–∞ /profile
   - ‚úÖ JWT —Ç–æ–∫–µ–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ cookie
   - ‚úÖ ProfileDropdown –ø–æ–∫–∞–∑—É—î –∞–≤–∞—Ç–∞—Ä–∫—É —ñ username
   - ‚ö†Ô∏è –ü—Ä–∏–≤'—è–∑–∫–∞ Minecraft –ù–ï –ø—Ä–∞—Ü—é—î (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –ë–î)

2. **–©–æ —Ç—Ä–µ–±–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É**:
   - –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (Supabase/MongoDB)
   - –û–Ω–æ–≤–∏—Ç–∏ Redirect URL –≤ Discord Application
   - –î–æ–¥–∞—Ç–∏ environment variables –Ω–∞ Vercel
   - –°—Ç–≤–æ—Ä–∏—Ç–∏ Minecraft –ø–ª–∞–≥—ñ–Ω –¥–ª—è –∫–æ–º–∞–Ω–¥–∏ /link

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ:

1. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –í—ñ–¥–∫—Ä–∏–π http://localhost:5173
3. –ù–∞—Ç–∏—Å–Ω–∏ "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord"
4. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –≤ Discord
5. –ü–æ–≤–µ—Ä–Ω–µ—à—Å—è –Ω–∞ /profile
6. –ü–æ–±–∞—á–∏—à —Å–≤—ñ–π Discord –ø—Ä–æ—Ñ—ñ–ª—å

## üìù TODO –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ:

- [ ] –î–æ–¥–∞—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö (Supabase recommended)
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ API endpoints –¥–ª—è Minecraft –ø—Ä–∏–≤'—è–∑–∫–∏
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ Minecraft –ø–ª–∞–≥—ñ–Ω
- [ ] –î–æ–¥–∞—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –î–æ–¥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –¥–æ–Ω–∞—Ç—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –∫–≤–µ—Å—Ç—ñ–≤ –≤ –ø—Ä–æ—Ñ—ñ–ª—ñ

## üêõ –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è:

- –ü—Ä–∏–≤'—è–∑–∫–∞ Minecraft –∑–∞—Ä–∞–∑ —Ç—ñ–ª—å–∫–∏ UI (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –ë–î)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –ø—Ä–∞—Ü—é—î (–ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–ª–∞–≥—ñ–Ω–æ–º)
- Logout –ø—Ä–∞—Ü—é—î, –∞–ª–µ –Ω–µ —ñ–Ω–≤–∞–ª—ñ–¥—É—î —Ç–æ–∫–µ–Ω (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É –¥–æ–¥–∞—Ç–∏ blacklist)

## üé® –§–∞–π–ª–∏ —â–æ –±—É–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ:

```
api/auth/
  ‚îú‚îÄ‚îÄ discord.ts      - –†–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ Discord OAuth
  ‚îú‚îÄ‚îÄ callback.ts     - –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ Discord
  ‚îú‚îÄ‚îÄ me.ts          - –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  ‚îî‚îÄ‚îÄ logout.ts      - –í–∏—Ö—ñ–¥

src/contexts/
  ‚îî‚îÄ‚îÄ AuthContext.tsx - React Context –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

src/components/
  ‚îú‚îÄ‚îÄ LoginButton/    - –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥—É
  ‚îî‚îÄ‚îÄ ProfileDropdown/ - –ú–µ–Ω—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

src/pages/
  ‚îî‚îÄ‚îÄ ProfilePage/    - –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ—Ñ—ñ–ª—é
```

## üöÄ –ì–æ—Ç–æ–≤–æ –¥–æ –¥–µ–ø–ª–æ—é?

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º –Ω–∞ Vercel:
1. ‚úÖ –î–æ–¥–∞–π Redirect URL –≤ Discord Application
2. ‚úÖ –ù–∞–ª–∞—à—Ç—É–π environment variables –Ω–∞ Vercel
3. ‚úÖ –ó–≥–µ–Ω–µ—Ä—É–π –Ω–æ–≤–∏–π JWT_SECRET
4. ‚úÖ git push

---

**–ü–∏—Ç–∞–Ω–Ω—è?** –ü–∏—à–∏, –¥–æ–ø–æ–º–æ–∂—É –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∞–±–æ Minecraft –ø–ª–∞–≥—ñ–Ω–∞! üéÆ
